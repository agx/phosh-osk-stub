phosh-osk-stub (0.23.0~rc1) experimental; urgency=medium

  * debian: Remove d/clean.  The files listed in there don't exist
  * build: Error out on missing function declarations
  * input-surface: Make pending labels match submitted ones
  * osk-stub: Make _proxy non-global
  * osk-stub: Avoid idle callback on quit.
    We already use g_unix_signal_add () so no need to schedule
    this even later.
  * osk-stub: Make loop non-global
  * osk-stub: Always use main loop.
    All invocations already have a running main loop so use that
    instead of exit (0).
  * osk-stub: Use automatic cleanup for GError.
    Rename to `err` to consistency with other error locations in this file
  * osk-stub: Use automatic cleanup for object_path
  * osk-stub: Use automatic cleanup for GVariant
  * osk-stub: Don't create osk_dbus multiple times.
    We don't want a new object when the surface gets recreated
  * osk-dbus: Fix indentation
  * osk-dbus: Log failure when we failt to acquire the well known name
  * osk-dbus: Allow to specify replacement policy.
    So far we always allowed replacement and replaced always, we might
    not always want to do this.
  * osk-dbus: Track whether we have the sm.puri.OSK0 dbus name.
    This allows other parts of the osk to react.
  * osk-stub: Only maintain input surface when we own the DBus name.
    This allows us to easily replace the running keyboard for development
    purposes and makes sure we get back a working one when the replacement
    goes away.
  * data: Allow replacement by default.
    This makes it simple to toy with other implementations without any other
    modificatins.
  * ci: Update build-deps.  This way we don't have to redo the image with
    every new build dependency.
  * ci: Drop Byzantium build.
    It's too cumpersome to keep it up to date, we do that downstream.
  * osk-widget: Parse style.
    This allows us to set style classes.
  * style: Add 'sys' key class.
    This is for non-character keys that are not toggles (e.g. esc, tab)
  * osk-widget: Make backspace 'sys' styled.
    Easier to spot this way.
  * terminal: Use sys class
  * osk-stub: Don't race with wayland registry on startup.
    If we acquire the DBus name before all wayland globals are registered
    we'd hit an assert. Avoid this by just not creating the surface on
    startup, it will happen once all wl globals are there.
  * dir-locals: Fix JS indentation.
    We indent with 2 spaces by default
  * input-methods: Fix doc strings
  * build: Only maintain glib version in a single place
  * layouts: Add more layouts.
    Again taken from gnome-shell as of
    The keyboard layouts were taken from gnome-shell as of
    6a88c0f0be5aed836f33ed2989d33add58c01403
  * input-surface: Move adding a layout to an extra function
  * input-surface: Honor POS_TEST_LAYOUT env var.
    This allows to quickly test a layout via
        POS_TEST_LAYOUT=nl POS_DEBUG=force-show _build/src/phosh-osk-stub --replace
    without having to change anything else.
  * input-surface: Emit a warning when we fail to lookup layout info
  * Use less generic name for `config.h`
  * char-popup: Use a grid.
    With lots of chars the single row is hard to use
  * char-popup: Use slightly larger font and more padding.
    This should make the buttons easier to hit.
  * build: Bump glib dependency to 2.66.
    Just to catch up a bit
  * input-surface: Move debug info to separate widget.
    Move the surface that keeps the debug information (which was
    phosh-osk-stub's initial purpose) into a separate widget. This makes
    pos-input-surface focus more in input and also allows us to add new
    things to the debug surface more easily without getting into conflict
    with e.g. the completion code.
    We keep the input-surface's callbacks needed for completion in place.
  * input-surface: Don't leak old_keys
    g_hash_table_get_keys_as_array is transfer: container
  * osk-widget: Handle height requests.
    This allows us to align properly within the input-surface as we're
    no longer dependent on the size of the debug output's box size
  * osk-widget: Make the current mode a property.
    So we can listen for changes
  * osk-widget: Parse locale from layout as well
  * osk-widget: Simplify adding common keys.
    Less code and will allow us to add multiple keys
  * osk-widget: Fix indentation
  * osk-widget: Clearly separate name and display name.
    The name is a unique identifier like `de` or `us` (corresponding to the
    basename of the layout file) while the display name is s.th. like
    `German` or `English (US)`.
  * osk-widget: Move get_popup_pos up
    and drop unused parameters
  * input-surface: Implement GActionMap and GActionGroup.
    This allows us to add actions from other places.
  * readme: Document --replace
  * readme: Use meson consistently.
    This makes it e.g. simpler to pick individual tests, etc.
  * osk-widget: Add key for popover menu
  * input-surface: Add popover menu.
    This allows to select the current layout
  * osk-widget: Center symbols.
    This helps when e.g. the text on the space bar breaks over two lines.
  * osk-widget: Drop '?" from symbol layer toggle.
    This makes it fit a bit better.
  * debug-widget: Use swapped-object-signal.
    This makes sure we disconnect from the input-method when
    when the input-surface goes away.
  * input-surface: Use swapped-object-signal.
    This makes sure we disconnect from the input-method when
    when the input-surface goes away.
  * input-method: Fix signal docs
  * input-surface: Make sure we have a valid input-method
  * debian: Use update-alternatives.
    This allows for easy selection between squeekboard and phosh-osk-stub
    while having both packages installed.
    Note that the user can still override the OSK completely via
    usr/share/applications/sm.puri.OSK0.desktop.
  * d/control: Update description a bit.
    We're not just a stub surface anymore
  * Update README

 -- Guido Günther <agx@sigxcpu.org>  Tue, 29 Nov 2022 14:13:16 +0100

phosh-osk-stub (0.22.0) experimental; urgency=medium

  * virtual-keyboard: Set default keymap if there are no layouts.
    When there are no layouts define set the default keymap. Failing to do
    so would make us abort with a protocol error as we'd send keys but never
    sent a keymap.
  * Clarify 'force-show' debug setting handling.
    Use it to override the GSetting rather than always showing the surface.
    The later was broken and is less useful as we usually want to hide
    the surface without text-input.
    The current interpretation of the option allows us to e.g. to run
    with GSETTINGS_BACKEND=memory easily.
  * data: Remove unused icons
  * build: Fix gettext package name
  * gitignore: Ignore doc package.
    Also drop nonexistent subprojects
  * input-surface: Construct parent object first
  * input-surface: Reduce row spacing on debug page.
    This allows us to fit more information
  * input-surface: Display surrounding text
  * pos-input-method: Fix return argument.
    Return NULL in case of API misuse
  * input-method: Allow to buffer client state.
    If we want to bother about preedit and surrounding-text we need to buffer
    client state and only apply on explicit commit. Add the necessary helpers
    to do that.
  * input-surface: Use actions instead of signals.  This will ease the move to
    a menu later on.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 02 Nov 2022 18:37:44 +0100

phosh-osk-stub (0.21.0) experimental; urgency=medium

  * vk-driver: Handle CTRL modifier
  * vk-driver: Handle KEY_{COPY,PASTE} as copy/paste keys
  * input-surface: Add copy/paste buttons.
    Let's see how this works out. E.g. it won't work in terminals.
  * ci: Update Debian image
  * osk-widget: Unblur icons.
    I've had these in screenshots and that doesn't look nice.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 31 Aug 2022 11:39:55 +0200

phosh-osk-stub (0.20.0) experimental; urgency=medium

  * Release 0.20.0. No changes over 0.20.0~beta1.

 -- Guido Günther <agx@sigxcpu.org>  Mon, 08 Aug 2022 11:30:17 +0200

phosh-osk-stub (0.20.0~beta1) experimental; urgency=medium

  [ Guido Günther ]
  * Sync version number with phosh. This makes sure older phosh-osk-stub
    in the archive doesn't replace us.
  * osk-stub: Use g_autoptr for GError
  * Add input-method.
    Move the wayland bits into a separate object
  * Use input-method instead of open coding
  * Move input-surface to lib.
    This allows us to include it in the documentation and separates
    things more from the binary
  * osk-widget: Add key repeat
  * gitlab-ci: Skip doc build when using PKG_ONLY
  * osk-widget: Cancel current symbol in cursor mode.
    Otherwise we emit a space character when space is released after cursor mode
  * osk-widget: Ignore double click.
  * build: Add generated sources to library dependency.
    Otherwise generated files like the DBus headers might not be around
    when compiling pos-osk-stub.c.
  * pos-input-method: Fix typo
  * pos-input-surface: Notify about screen-keyboard-enabled prop changes.
    The property is G_PARAM_EXPLICIT_NOTIFY.
  * pos-osk-widget: Fix doc string
  * pos-input-surface: Drop (for now) unused prototype
  * pos-input-surface: Add getter for 'surface-visible'
  * pos-input-surface: Add getter for 'screen-keyboard-visible' property
  * pos-input-surface: Handle screen-keyboard-enabled gsetting.
    So far we only adjusted the debug surface string.
  * pos-osk-widget: Split setting of layer to separate function.
    This will allow to trigger it from other parts of the code
  * pos-osk-widget: Rename get_layer to get_keyboard_layer.
    This avoids confusion between the Layer enum and the KeyboardLayer
    struct.
  * pos-osk-widget: Rename get_level to get_layer.
    This makes it match the property and the setter.
  * pos-input-surface: Reset keyboard layer when current osk changes
  * pos-input-surface: Reset keyboard layer to normal on fold.
    This makes sure the user dosn't see "random" levels when e.g. switching
    between apps.
  * data: Indicate that we're using feedbackd.
    This will allow configuration tools to pick up that intent.
  * Recreate input surface when it goes away.
    This can happen when e.g. the output with it is unplugged.
  * osk-widget: Allow to parse PosOskKey.
    Allow to parse the key object rather than just plain strings as we
    do in the current layouts. This allows us to wire up tab, etc in
    layouts.
  * vk-driver: Add function keys
  * Add initial terminal layout.
    This lacks menu key, pos1/end, pg-up/pg-down, esc and control
  * data: Add icon to desktop file

  [ InsanePrawn ]
  * vk-driver: Add keycode for ESC
  * terminal: Add ~, TAB and ESC

 -- Guido Günther <agx@sigxcpu.org>  Tue, 26 Jul 2022 11:59:46 +0200

phosh-osk-stub (0.0.1) experimental; urgency=medium

  * Initial release

 -- Guido Günther <agx@sigxcpu.org>  Mon, 07 Feb 2022 10:09:57 +0100
